<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Split View å¯ç”¨æŒ‡å—</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #f8f9fa;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px 30px;
      text-align: center;
    }

    .header-icon {
      font-size: 48px;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 32px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .subtitle {
      font-size: 18px;
      opacity: 0.9;
    }

    main {
      padding: 40px 30px;
    }

    .intro {
      text-align: center;
      margin-bottom: 40px;
      padding: 20px;
      background: #e3f2fd;
      border-radius: 8px;
      border-left: 4px solid #2196f3;
    }

    .intro h2 {
      color: #1976d2;
      margin-bottom: 10px;
    }

    .guide-section {
      margin-bottom: 40px;
    }

    .section-title {
      font-size: 24px;
      color: #333;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .step-card {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 15px;
      transition: all 0.3s ease;
    }

    .step-card:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }

    .step-header {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      margin-bottom: 15px;
    }

    .step-number {
      background: #2563eb;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
    }

    .step-content h3 {
      font-size: 18px;
      margin-bottom: 8px;
      color: #333;
    }

    .step-description {
      color: #666;
      line-height: 1.6;
    }

    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 14px;
      margin: 10px 0;
      overflow-x: auto;
    }

    .highlight {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 6px;
      padding: 15px;
      margin: 15px 0;
    }

    .highlight h4 {
      color: #856404;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .button-group {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: #2563eb;
      color: white;
    }

    .btn-primary:hover {
      background: #1d4ed8;
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #5a6268;
      transform: translateY(-1px);
    }

    .alternative-section {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 8px;
      padding: 20px;
      margin-top: 30px;
    }

    .alternative-section h3 {
      color: #856404;
      margin-bottom: 15px;
    }

    .platform-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .platform-card {
      background: white;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .platform-icon {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .platform-name {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .platform-desc {
      font-size: 14px;
      color: #666;
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      margin-left: 10px;
    }

    .status-enabled {
      background: #d4edda;
      color: #155724;
    }

    .status-disabled {
      background: #f8d7da;
      color: #721c24;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: #e9ecef;
      border-radius: 3px;
      margin: 20px 0;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #2563eb, #7c3aed);
      width: 0%;
      transition: width 0.3s ease;
    }

    footer {
      text-align: center;
      padding: 20px;
      background: #f8f9fa;
      color: #666;
      font-size: 14px;
    }

    @media (max-width: 768px) {
      .container {
        margin: 10px;
        border-radius: 8px;
      }

      header {
        padding: 30px 20px;
      }

      h1 {
        font-size: 28px;
      }

      main {
        padding: 30px 20px;
      }

      .button-group {
        flex-direction: column;
      }

      .platform-cards {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="header-icon">ğŸ–¥ï¸</div>
      <h1>Chrome Split View å¯ç”¨æŒ‡å—</h1>
      <p class="subtitle">è½»æ¾å¯ç”¨Chromeå®éªŒæ€§åˆ†å±åŠŸèƒ½ï¼Œæå‡æ‚¨çš„æµè§ˆä½“éªŒ</p>
    </header>

    <main>
      <section class="intro">
        <h2>ğŸ“– å…³äº Split View</h2>
        <p><strong>Split View</strong> æ˜¯Chromeçš„å®éªŒæ€§åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å•ä¸ªæµè§ˆå™¨çª—å£ä¸­åŒæ—¶æ˜¾ç¤ºä¸¤ä¸ªç½‘é¡µï¼Œéå¸¸é€‚åˆå¤šä»»åŠ¡å¤„ç†ã€å¯¹æ¯”æµè§ˆå’Œæå‡å·¥ä½œæ•ˆç‡ã€‚</p>
        <div class="progress-bar">
          <div class="progress-fill" id="progressBar"></div>
        </div>
        <p><small>æŒ‰ç…§æœ¬æŒ‡å—å®Œæˆè®¾ç½®ï¼Œå³å¯å¼€å§‹ä½¿ç”¨åˆ†å±åŠŸèƒ½ï¼</small></p>
      </section>

      <section class="guide-section">
        <h2 class="section-title">
          <span>ğŸš€</span>
          å¯ç”¨æ­¥éª¤
        </h2>

        <div class="step-card">
          <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>æ‰“å¼€Chromeå®éªŒæ€§åŠŸèƒ½é¡µé¢</h3>
              <p class="step-description">
                é¦–å…ˆéœ€è¦æ‰“å¼€Chromeçš„å®éªŒæ€§åŠŸèƒ½è®¾ç½®é¡µé¢ã€‚è¿™æ˜¯Googleæä¾›çš„é«˜çº§åŠŸèƒ½æµ‹è¯•åŒºåŸŸã€‚
              </p>
            </div>
          </div>
          <div class="button-group">
            <button class="btn btn-primary" onclick="openChromeFlags()">
              <span>ğŸ”—</span>
              æ‰“å¼€ chrome://flags
            </button>
          </div>
          <div class="code-block">
            chrome://flags/#split-view
          </div>
        </div>

        <div class="step-card">
          <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>æŸ¥æ‰¾ Split View åŠŸèƒ½</h3>
              <p class="step-description">
                åœ¨å®éªŒæ€§åŠŸèƒ½é¡µé¢ä¸­ï¼Œæ‰¾åˆ°"Split View"é€‰é¡¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨é¡µé¢é¡¶éƒ¨çš„æœç´¢åŠŸèƒ½å¿«é€Ÿå®šä½ã€‚
              </p>
            </div>
          </div>
          <div class="highlight">
            <h4><span>ğŸ’¡</span> æœç´¢æŠ€å·§</h4>
            <p>åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ <code>split-view</code> æˆ– <code>Split View</code> å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç›¸å…³é€‰é¡¹ã€‚</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>å¯ç”¨ Split View åŠŸèƒ½</h3>
              <p class="step-description">
                æ‰¾åˆ°"Split View"é€‰é¡¹åï¼Œå°†ä¸‹æ‹‰èœå•ä»"Default"æ”¹ä¸º"Enabled"ã€‚
              </p>
            </div>
          </div>
          <div class="highlight">
            <h4><span>âš ï¸</span> é‡è¦æç¤º</h4>
            <p>å¯ç”¨å®éªŒæ€§åŠŸèƒ½åéœ€è¦é‡å¯Chromeæµè§ˆå™¨æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-header">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>é‡å¯Chromeæµè§ˆå™¨</h3>
              <p class="step-description">
                ç‚¹å‡»é¡µé¢å³ä¸‹è§’å‡ºç°çš„"Relaunch"æŒ‰é’®ï¼Œæˆ–è€…æ‰‹åŠ¨å…³é—­å¹¶é‡æ–°æ‰“å¼€Chromeæµè§ˆå™¨ã€‚
              </p>
            </div>
          </div>
          <div class="button-group">
            <button class="btn btn-secondary" onclick="checkSplitViewStatus()">
              <span>âœ…</span>
              æ£€æŸ¥å¯ç”¨çŠ¶æ€
            </button>
          </div>
        </div>

        <div class="step-card">
          <div class="step-header">
            <div class="step-number">5</div>
          </div>
          <div class="step-content">
            <h3>å¼€å§‹ä½¿ç”¨åˆ†å±åŠŸèƒ½</h3>
            <p class="step-description">
              é‡å¯å®Œæˆåï¼Œç‚¹å‡»æ‰©å±•å›¾æ ‡å³å¯ä½¿ç”¨Split ViewåŠŸèƒ½ï¼é€‰æ‹©æ‚¨æƒ³è¦åŒæ—¶æµè§ˆçš„ä¸¤ä¸ªç½‘ç«™ï¼Œä¸€é”®å¼€å¯åˆ†å±æ¨¡å¼ã€‚
            </p>
          </div>
          <div class="button-group">
            <button class="btn btn-primary" onclick="testSplitView()">
              <span>ğŸ§ª</span>
              æµ‹è¯•åˆ†å±åŠŸèƒ½
            </button>
          </div>
        </div>
      </section>

      <section class="alternative-section">
        <h3><span>ğŸ”„</span> æ›¿ä»£æ–¹æ¡ˆ</h3>
        <p>å¦‚æœæ‚¨çš„Chromeç‰ˆæœ¬ä¸æ”¯æŒSplit Viewå®éªŒæ€§åŠŸèƒ½ï¼Œæˆ‘ä»¬æä¾›äº†åŸºäºçª—å£ç®¡ç†çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°ç±»ä¼¼çš„åˆ†å±æ•ˆæœï¼š</p>

        <div class="platform-cards">
          <div class="platform-card">
            <div class="platform-icon">ğŸªŸ</div>
            <div class="platform-name">çª—å£åˆ†å±</div>
            <div class="platform-desc">è‡ªåŠ¨åˆ›å»ºä¸¤ä¸ªå¹¶æ’çš„æµè§ˆå™¨çª—å£ï¼Œå®ç°åˆ†å±æµè§ˆæ•ˆæœ</div>
          </div>
          <div class="platform-card">
            <div class="platform-icon">âš™ï¸</div>
            <div class="platform-name">æ™ºèƒ½å¸ƒå±€</div>
            <div class="platform-desc">æ ¹æ®å±å¹•å°ºå¯¸è‡ªåŠ¨è°ƒæ•´çª—å£å¤§å°å’Œä½ç½®</div>
          </div>
          <div class="platform-card">
            <div class="platform-icon">ğŸ¯</div>
            <div class="platform-name">å¤šç§æ¨¡å¼</div>
            <div class="platform-desc">æ”¯æŒå·¦å³åˆ†å±ã€ä¸Šä¸‹åˆ†å±ã€ä¸“æ³¨æ¨¡å¼ç­‰å¤šç§å¸ƒå±€</div>
          </div>
        </div>
      </section>

      <div class="button-group" style="justify-content: center; margin-top: 40px;">
        <button class="btn btn-primary" onclick="openExtension()">
          <span>ğŸš€</span>
          æ‰“å¼€ Split View æ‰©å±•
        </button>
        <button class="btn btn-secondary" onclick="window.close()">
          <span>âœ…</span>
          å®Œæˆè®¾ç½®
        </button>
      </div>
    </main>

    <footer>
      <p>ğŸ’¡ æç¤ºï¼šå®éªŒæ€§åŠŸèƒ½å¯èƒ½åœ¨æœªæ¥çš„Chromeç‰ˆæœ¬ä¸­å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥éšæ—¶å›åˆ°æ­¤é¡µé¢é‡æ–°è®¾ç½®ã€‚</p>
      <p style="margin-top: 10px;">
        Split View Chrome Extension v1.0.0 |
        <span id="currentStatus">æ£€æµ‹ä¸­...</span>
      </p>
    </footer>
  </div>

  <script>
    // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      updateProgress(0);
      checkCurrentStatus();
      startProgressAnimation();
    });

    // è¿›åº¦æ¡åŠ¨ç”»
    function startProgressAnimation() {
      let progress = 0;
      const interval = setInterval(() => {
        progress += 2;
        updateProgress(progress);

        if (progress >= 100) {
          clearInterval(interval);
        }
      }, 50);
    }

    // æ›´æ–°è¿›åº¦æ¡
    function updateProgress(percent) {
      const progressBar = document.getElementById('progressBar');
      progressBar.style.width = percent + '%';
    }

    // æ‰“å¼€Chromeå®éªŒæ€§åŠŸèƒ½é¡µé¢
    function openChromeFlags() {
      window.open('chrome://flags/#split-view', '_blank');
      updateProgress(25);
      showNotification('æ­£åœ¨æ‰“å¼€Chromeå®éªŒæ€§åŠŸèƒ½é¡µé¢...', 'info');
    }

    // æ£€æŸ¥Split ViewçŠ¶æ€
    async function checkSplitViewStatus() {
      try {
        updateProgress(75);
        showNotification('æ­£åœ¨æ£€æµ‹Split ViewçŠ¶æ€...', 'info');

        // å‘é€æ¶ˆæ¯ç»™background scriptæ£€æŸ¥çŠ¶æ€
        const response = await sendMessageToBackground({
          action: 'checkSplitViewSupport'
        });

        if (response.success) {
          const data = response.data;

          if (data.hasNativeSupport) {
            showNotification('âœ… Split ViewåŠŸèƒ½å·²å¯ç”¨ï¼', 'success');
            updateProgress(100);
          } else {
            showNotification('âš ï¸ Split ViewåŠŸèƒ½æœªå¯ç”¨ï¼Œè¯·æ£€æŸ¥è®¾ç½®', 'warning');
          }

          updateStatusDisplay(data);
        } else {
          showNotification('æ£€æµ‹å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•', 'error');
        }

      } catch (error) {
        console.error('æ£€æŸ¥çŠ¶æ€å¤±è´¥:', error);
        showNotification('æ£€æµ‹å¤±è´¥ï¼Œè¯·ç¡®ä¿æ‰©å±•å·²æ­£ç¡®å®‰è£…', 'error');
      }
    }

    // æ£€æŸ¥å½“å‰çŠ¶æ€
    async function checkCurrentStatus() {
      try {
        const response = await sendMessageToBackground({
          action: 'checkSplitViewSupport'
        });

        if (response.success) {
          updateStatusDisplay(response.data);
        }

      } catch (error) {
        console.error('æ£€æŸ¥å½“å‰çŠ¶æ€å¤±è´¥:', error);
        document.getElementById('currentStatus').textContent = 'æ£€æµ‹å¤±è´¥';
      }
    }

    // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
    function updateStatusDisplay(data) {
      const statusElement = document.getElementById('currentStatus');

      if (data.hasNativeSupport) {
        statusElement.innerHTML = '<span class="status-indicator status-enabled">âœ… å·²å¯ç”¨</span>';
      } else {
        statusElement.innerHTML = '<span class="status-indicator status-disabled">âŒ æœªå¯ç”¨</span>';
      }
    }

    // æµ‹è¯•Split ViewåŠŸèƒ½
    async function testSplitView() {
      try {
        showNotification('æ­£åœ¨æµ‹è¯•åˆ†å±åŠŸèƒ½...', 'info');

        const response = await sendMessageToBackground({
          action: 'createAlternativeSplit',
          data: {
            website1: 'https://www.google.com',
            website2: 'https://github.com',
            mode: 'side-by-side'
          }
        });

        if (response.success) {
          showNotification('âœ… åˆ†å±åŠŸèƒ½æµ‹è¯•æˆåŠŸï¼', 'success');
          updateProgress(100);
        } else {
          showNotification('æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ‰©å±•æƒé™', 'error');
        }

      } catch (error) {
        console.error('æµ‹è¯•å¤±è´¥:', error);
        showNotification('æµ‹è¯•å¤±è´¥ï¼š' + error.message, 'error');
      }
    }

    // æ‰“å¼€æ‰©å±•
    async function openExtension() {
      try {
        // å°è¯•æ‰“å¼€æ‰©å±•çš„popup
        await chrome.action.openPopup();
        window.close();
      } catch (error) {
        // å¦‚æœæ— æ³•æ‰“å¼€popupï¼Œæ˜¾ç¤ºæç¤º
        showNotification('è¯·ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ ä¸­çš„æ‰©å±•å›¾æ ‡', 'info');
      }
    }

    // å‘é€æ¶ˆæ¯ç»™background script
    function sendMessageToBackground(message) {
      return new Promise((resolve, reject) => {
        chrome.runtime.sendMessage(message, (response) => {
          if (chrome.runtime.lastError) {
            reject(new Error(chrome.runtime.lastError.message));
          } else {
            resolve(response);
          }
        });
      });
    }

    // æ˜¾ç¤ºé€šçŸ¥
    function showNotification(message, type = 'info') {
      // åˆ›å»ºé€šçŸ¥å…ƒç´ 
      const notification = document.createElement('div');
      notification.className = `notification notification-${type}`;
      notification.textContent = message;

      // æ·»åŠ æ ·å¼
      Object.assign(notification.style, {
        position: 'fixed',
        top: '20px',
        right: '20px',
        padding: '12px 20px',
        borderRadius: '6px',
        color: 'white',
        fontSize: '14px',
        fontWeight: '500',
        zIndex: '10000',
        opacity: '0',
        transform: 'translateY(-20px)',
        transition: 'all 0.3s ease',
        maxWidth: '300px'
      });

      // è®¾ç½®èƒŒæ™¯è‰²
      switch (type) {
        case 'success':
          notification.style.background = '#28a745';
          break;
        case 'error':
          notification.style.background = '#dc3545';
          break;
        case 'warning':
          notification.style.background = '#ffc107';
          notification.style.color = '#212529';
          break;
        default:
          notification.style.background = '#17a2b8';
      }

      // æ·»åŠ åˆ°é¡µé¢
      document.body.appendChild(notification);

      // æ˜¾ç¤ºåŠ¨ç”»
      setTimeout(() => {
        notification.style.opacity = '1';
        notification.style.transform = 'translateY(0)';
      }, 100);

      // è‡ªåŠ¨éšè—
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-20px)';
        setTimeout(() => {
          if (document.body.contains(notification)) {
            document.body.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }

    // é”®ç›˜å¿«æ·é”®
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && e.ctrlKey) {
        openChromeFlags();
      } else if (e.key === 'F5') {
        e.preventDefault();
        checkCurrentStatus();
      }
    });
  </script>
</body>
</html>